------

# 遥感无云影像寻找下载器（RCFDTool）

在遥感应用中，获取高质量的无云影像一直是个难题。以 Sentinel-2 数据为例，传统做法通常需要研究人员打开 **Google Earth Engine (GEE) 代码编辑器**，编写重复性代码来完成以下流程：

- 研究区范围设定
- 云量筛选
- 裁剪至研究区
- 选择 RGB 波段进行可视化
- 判断是否无云，若有云则继续挑选下一景

对于一个研究区全年逐景影像的筛查，这一过程需要手动编写过滤条件、逐张打印缩略图查看，费时费力。而在更大范围（如省级、全国）或多年时序任务中，人工代码方式几乎不可行。

## 为什么会有 RCFDTool？

传统手动写代码存在以下痛点：

- **效率低**：逐景判断、反复运行代码，工作量巨大。
- **不直观**：GEE 的代码环境与影像展示分离，用户需要频繁切换。
- **门槛高**：初学者需要掌握 API 和 JS/Python 语法，学习成本大。
- **判云不稳定**：不同地区和季节需要反复调阈值，缺乏统一标准。
- **合成复杂**：生成无云合成影像需要额外脚本，容易出错。

## RCFDTool 解决了什么问题？

**可视化展示**

- 在界面上直接浏览影像缩略图或地图，快速判断是否无云。
- 所见即所得，比在 GEE 中打印 URL 或导出缩略图更直观。

**自动寻找**

- 内置云量判别算法，自动筛掉高云量影像，优先展示低云/无云影像。
- 避免了人工写条件、调试阈值的麻烦。

**一键下载**

- 不需要写 `Export.image.toDrive()` 或 API 调用，用户可直接选择影像并下载。
- 支持批量下载，大大减少重复操作。

**降低门槛**

- 无需掌握 GEE 脚本语言，普通科研人员和业务用户也能快速上手。

- 对非编程背景的使用者非常友好。

- ## 功能一览

  | 功能                        | 说明                                                     |
  | --------------------------- | -------------------------------------------------------- |
  | 云量过滤（Cloud filtering） | 筛除或标注云量比例高的影像，仅保留低云/无云影像。        |
  | 时间/日期选择               | 指定时间范围（如某年某月）获取影像。                     |
  | 区域选择                    | 支持矩形框、多边形等多种方式选取研究区。                 |
  | 分辨率选择                  | 按需求选择影像像素分辨率。                               |
  | 卫星数据源选择              | 支持Sentinel2数据。                                      |
  | 数据源预览                  | 提供缩略图或快速预览，方便判断云、阴影、水体等干扰情况。 |
  | 下载管理                    | 仅支持单个TIF下载，输出 GeoTIFF 等标准格式。             |



|                                                              |      |
| ------------------------------------------------------------ | ---- |
|                                                              |      |
| 数据配置界面：                                               |      |
| ![image-20250917092756425](assets\image-20250917092756425-1758072485893-3.png) |      |
| 遥感影像查看器：                                             |      |
| ![image-20250917083852775](assets\image-20250917083852775.png) |      |
| ![image-20250917083936132](assets\image-20250917083936132.png) |      |
| ![image-20250917084015148](assets\image-20250917084015148.png) |      |
|                                                              |      |
|                                                              |      |
| **安装与使用：**                                             |      |

1. 下载并且解压程序压缩包

2. 通过链接创建服务账户这可以不使用浏览器授权而转为Token鉴权:https://console.cloud.google.com/iam-admin/serviceaccounts

   ![image-20250917085643977](assets\image-20250917085643977-1758072499451-8.png)

   创建服务账户后在操作列点击**管理密钥**去创建私钥

   ![image-20250917090007518](assets\image-20250917090007518.png)

   ![image-20250917085758162](assets\image-20250917085758162.png)

   创建私钥后会自动下载授权**.json**文件将其放入程序的**key**目录下即可E:\pysiderLearn\pysiderProject\flash**\key**

3. 下载**pixi**(包管理工具)

4. 在**Main.py**所在目录中进入**cmd**使用**pixi install** 安装依赖

5. 安装好依赖后运行 **pixi run -e dev python .\Main.py**

   **数据配置说明**：

   | 🛰️ 基础参数           |                                                              |
   | -------------------- | ------------------------------------------------------------ |
   | 参数名称             | 功能说明                                                     |
   | **卫星类型**         | 选择影像数据源，目前支持 Sentinel-2 等。                     |
   | **云量**             | 设置允许的最大云量百分比（如 20.00 表示仅筛选云量 ≤20% 的影像）。 |
   | **像素分辨率**       | 设置缩略图的空间分辨率（数值越大，分辨率越高，但获取缩略图更耗时，推荐512）。 |
   |                      |                                                              |
   | 📅 时间范围           |                                                              |
   | 参数名称             | 功能说明                                                     |
   | **影像开始日期**     | 设置影像筛选的起始日期。                                     |
   | **影像结束日期**     | 设置影像筛选的结束日期。                                     |
   |                      |                                                              |
   | 📍 空间范围与数据     |                                                              |
   | 参数名称             | 功能说明                                                     |
   | **感兴趣区域 (ROI)** | 导入研究区矢量文件（如 Shapefile），仅在该范围内筛选影像。   |
   | **基础数据路径**     | 指定本地基础数据文件夹路径，用于存放参考数据或对比分析。     |
   |                      |                                                              |
   | ⚙️ 工具与保存         |                                                              |
   | 参数名称             | 功能说明                                                     |
   | **GDAL 工具路径**    | 指定本地 GDAL 工具的安装目录，用于影像处理、投影转换等操作。 |
   | **影像下载保存路径** | 设置影像下载的保存目录，所有结果文件会存放在该路径中。       |
   |                      |                                                              |
   |                      |                                                              |
   |                      |                                                              |
   |                      |                                                              |